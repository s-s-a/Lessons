# –ö–æ–¥ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å—Ç—Ä–æ–∫–∏ –ø–æ —Ñ–∞–π–ª–∞–º

# –î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–æ–¥—É–ª—å os.

# –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:
# üîµos.walk ‚Äî —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ö–æ–¥–∏—Ç –≤—Å–µ –ø–∞–ø–∫–∏ –∏ —Ñ–∞–π–ª—ã.
# üîµ–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –≤ —Ä–µ–∂–∏–º–µ —á—Ç–µ–Ω–∏—è (utf-8, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –æ—à–∏–±–∫–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏).
# üîµ–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∏—Å–∫–æ–º–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.
# üîµ–í—ã–≤–æ–¥–∏—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É, –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –∏ —Å–∞–º—É —Å—Ç—Ä–æ–∫—É.

import os


def search_string_in_files(folder_path, search_string):
    # –ü—Ä–æ—Ö–æ–¥–∏–º—Å—è –ø–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º –∏ –ø–∞–ø–∫–∞–º, –Ω–∞—á–∏–Ω–∞—è —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø—É—Ç–∏
    for root, _, files in os.walk(folder_path):
        # –ò—Ç–µ—Ä–∏—Ä—É–µ–º—Å—è –ø–æ –∫–∞–∂–¥–æ–º—É —Ñ–∞–π–ª—É –≤ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–µ
        for file_name in files:
            file_path = os.path.join(root, file_name)

            try:
                # –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –¥–ª—è —á—Ç–µ–Ω–∏—è –≤ —Ä–µ–∂–∏–º–µ "r" —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π "utf-8"
                with open(file_path, "r", encoding="utf-8", errors="ignore") as file:
                    # –ò—Ç–µ—Ä–∏—Ä—É–µ–º—Å—è –ø–æ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ –≤ —Ñ–∞–π–ª–µ, –Ω–∞—á–∏–Ω–∞—è –Ω—É–º–µ—Ä–∞—Ü–∏—é —Å 1
                    for line_number, line in enumerate(file, start=1):
                        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –ª–∏ –∏—Å–∫–æ–º–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–µ —Ñ–∞–π–ª–∞
                        if search_string in line:
                            print(f"[–ù–∞–π–¥–µ–Ω–æ] {file_path} (—Å—Ç—Ä–æ–∫–∞ {line_number}): {line.strip()}")
            except (IOError, OSError):
                print(f"[–û—à–∏–±–∫–∞] –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª: {file_path}")


if __name__ == "__main__":
    folder = input("–í–≤–µ–¥–∏—Ç–µ –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ: ")
    query = input("–í–≤–µ–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –¥–ª—è –ø–æ–∏—Å–∫–∞: ")
    search_string_in_files(folder, query)
